# 人工智能基础课程大作业——基于神经网络的TSP类求解问题
The repository is created by finishing the homework of the AI Basic course in NJUST.

Last update: 2024.12.22

说明：该项目为南京理工大学黄老师《人工智能基础》课程大作业，代码部分全部内容由【钱学森学院92200072011丁梓峻】独立完成，共历经3次更新;

**目标：**

提供南京市旅游规划智能系统，能够根据用户的需求，给出旅游规划方案，具体包括路径最短以及同时考虑时间和花费最短两个部分：
1. 路径最短：根据用户选择的旅游景点，计算将这些景点都遍历一次所需的最短距离及相应的最佳路径；
2. 时间和花费最短：根据用户选择的旅游景点，选择合适路线，尽可能使出行时间和花费最短（基于打车出行的前提下，若某两个景点之间的距离非常近，则改为步行时间），于是目标函数为规划成本与所需时间的加权组合；这里值得注意的是：用户可以自主调节成本参数（即成本相对于时间的比重），以改变输出最佳路径及相应所需成本、时间的结果；

****

**具体细节：**
1. 系统为用户提供了南京市的25个著名景点（包括明孝陵、夫子庙、南京博物院等），用户可以自由选择将要出行的任意景点；
2. 用户可以选择需求：路径最短or时间及花费最短，根据用户所选需求，系统会调用相应的模型输出一条最佳路径，并给出这条路径的距离或者所用时间；
3. 系统内嵌的模型包括GNN模型和Hopfield神经网络模型，在路径规划问题中，每次调用时这两种模型都会训练，但只返回最佳结果；在时间及花费最短规划问题中，仅调用GNN神经网络模型；
4. 用户首次选中的景点为输出路径中的起始景点（在交互界面中呈现浅绿色）；

****

**注意事项：**
1. 由于模型具有随机性，每次运行结果可能会存在差异，但是大体上的输出结果比较接近最佳结果；
2. 用户每次点击提交按钮后，需要耐心等待，因为模型训练需要一定时间；
3. 在路径规划的实现过程中，对模型输出结果的检验基于“暴力穷举法”进行，即遍历所有可能的路径，找出距离或者时间最短的路径；结果检验仅用于对比，不作为用户在系统中可见的部分；
4. user_input.py文件中第199-201行对应“穷举验证”的部分，如有需要，可以关闭注释，在“路径规划”的模型任务中自行验证神经网络求解的结果与真实最短结果的对比；但需要注意，“穷举法”在输入景点数超过15时，将及其耗费时间，几乎不可输出结果；

****
**一、文件架构**
```
orign_data——存放原始数据的文件夹
  attraction_distance.xlsx——25个景点之间距离的邻接矩阵数据
  attraction_cost.xlsx——25个景点之间成本的邻接矩阵数据
  attraction_time.xlsx——25个景点之间时间的邻接矩阵数据
attraction_data.py——对原始数据进行处理，保存了处理后的邻接矩阵和城市索引映射信息
main.py——主程序，调用接口以展示界面
GNN.py——图神经网络模型，输入邻接矩阵，输出最佳路径和最短距离
hopfield.py——Hopfield神经网络模型，输入邻接矩阵，输出最佳路径和最短距离
user_input.py——用户输入模块，包括城市选择、需求选择等，并调用相关模型
validation.py——输出检验模块，用于对比模型输出结果（用户不可见）
print_structure.py——打印文件结构（不是问题求解的部分）
```

**二、配置环境：**
```
1. 本地环境：Python 3.9.13 (tags/v3.9.13:6de2ca5, May 17 2022, 16:36:42) [MSC v.1929 64 bit (AMD64)] on win32
（兼容的Python版本均可）
2. 依赖包安装方法：
根据项目创建requirements.txt文件，在命令行中输入：pip install -r requirements.txt
或：安装torch、torch_geometric、numpy、pandas、tkinter、itertools、threading即可.
```

**三、运行方法：**
```
配置相关环境后，直接运行main.py即可，然后显示界面
```

**四、界面说明：**
```
1. 界面的第一行显示规划目标：“路径规划”、“时间及成本规划”，默认选中“路径规划”；
2. 界面的2~6行显示南京市的25个旅游景点，用户可以任意选取其中的若干景点，注意，选择的第一个景点即为输出景点中的起始景点；
3. 点击“提交”按钮即可在后端调用模型，用户等待一段时间即可输出结果；
```
